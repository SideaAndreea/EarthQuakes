{"ast":null,"code":"import { WebMercatorViewport } from \"deck.gl\";\n\nconst applyToArray = (func, array) => func.apply(Math, array);\n\nexport const getMapBounds = function (points) {\n  let {\n    width = 800,\n    height = 300,\n    padding,\n    capZoom = 15\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (!points) return {};\n  let cornersLongLat = [[], []];\n  const batchMaxSize = 100000;\n\n  for (let i = 1; i <= Math.ceil(points.length / batchMaxSize); i++) {\n    const pointsLong = points.map(point => point.longitude).slice(i === 1 ? 0 : i - 1 * batchMaxSize + 1, i * batchMaxSize);\n    const pointsLat = points.map(point => point.latitude).slice(i === 1 ? 0 : i - 1 * batchMaxSize + 1, i * batchMaxSize);\n\n    try {\n      cornersLongLat = [...cornersLongLat, [applyToArray(Math.min, pointsLong), applyToArray(Math.min, pointsLat)], [applyToArray(Math.max, pointsLong), applyToArray(Math.max, pointsLat)]];\n    } catch {\n      console.log(\"Maximum call stack exceeded when determining map bounds.\");\n      return {};\n    }\n  }\n\n  let cornersLong = [[], []];\n  let cornersLat = [[], []];\n\n  for (let i = 2; i <= cornersLongLat.length - 1; i++) {\n    cornersLong = [...cornersLong, [cornersLongLat[i][0]]];\n    cornersLat = [...cornersLat, [cornersLongLat[i][1]]];\n  }\n\n  const finalCornersLongLat = [[applyToArray(Math.min, cornersLong.slice(2, cornersLat.length)), applyToArray(Math.min, cornersLat.slice(2, cornersLat.length))], [applyToArray(Math.max, cornersLong.slice(2, cornersLat.length)), applyToArray(Math.max, cornersLat.slice(2, cornersLat.length))]];\n\n  if (finalCornersLongLat[0][0] === Infinity) {\n    return {};\n  }\n\n  const viewport = new WebMercatorViewport({\n    height,\n    width\n  }).fitBounds(finalCornersLongLat, {\n    padding\n  });\n  const {\n    longitude,\n    latitude,\n    zoom\n  } = viewport;\n  return {\n    longitude,\n    latitude,\n    zoom: Math.max(0, Math.min(zoom, capZoom))\n  };\n};","map":{"version":3,"names":["WebMercatorViewport","applyToArray","func","array","apply","Math","getMapBounds","points","width","height","padding","capZoom","cornersLongLat","batchMaxSize","i","ceil","length","pointsLong","map","point","longitude","slice","pointsLat","latitude","min","max","console","log","cornersLong","cornersLat","finalCornersLongLat","Infinity","viewport","fitBounds","zoom"],"sources":["C:/Users/deeag/OneDrive/Desktop/AplicaÈ›ii/earthquakes/src/components/MapComponent/utils.js"],"sourcesContent":["import { WebMercatorViewport } from \"deck.gl\";\r\n\r\nconst applyToArray = (func, array) => func.apply(Math, array);\r\n\r\nexport const getMapBounds = (\r\n  points,\r\n  { width = 800, height = 300, padding, capZoom = 15 } = {}\r\n) => {\r\n  if (!points) return {};\r\n\r\n  let cornersLongLat = [[], []];\r\n  const batchMaxSize = 100000;\r\n\r\n  for (let i = 1; i <= Math.ceil(points.length / batchMaxSize); i++) {\r\n    const pointsLong = points\r\n      .map((point) => point.longitude)\r\n      .slice(i === 1 ? 0 : i - 1 * batchMaxSize + 1, i * batchMaxSize);\r\n    const pointsLat = points\r\n      .map((point) => point.latitude)\r\n      .slice(i === 1 ? 0 : i - 1 * batchMaxSize + 1, i * batchMaxSize);\r\n    try {\r\n      cornersLongLat = [\r\n        ...cornersLongLat,\r\n        [applyToArray(Math.min, pointsLong), applyToArray(Math.min, pointsLat)],\r\n        [applyToArray(Math.max, pointsLong), applyToArray(Math.max, pointsLat)],\r\n      ];\r\n    } catch {\r\n      console.log(\"Maximum call stack exceeded when determining map bounds.\");\r\n      return {};\r\n    }\r\n  }\r\n\r\n  let cornersLong = [[], []];\r\n  let cornersLat = [[], []];\r\n  for (let i = 2; i <= cornersLongLat.length - 1; i++) {\r\n    cornersLong = [...cornersLong, [cornersLongLat[i][0]]];\r\n    cornersLat = [...cornersLat, [cornersLongLat[i][1]]];\r\n  }\r\n\r\n  const finalCornersLongLat = [\r\n    [\r\n      applyToArray(Math.min, cornersLong.slice(2, cornersLat.length)),\r\n      applyToArray(Math.min, cornersLat.slice(2, cornersLat.length)),\r\n    ],\r\n    [\r\n      applyToArray(Math.max, cornersLong.slice(2, cornersLat.length)),\r\n      applyToArray(Math.max, cornersLat.slice(2, cornersLat.length)),\r\n    ],\r\n  ];\r\n\r\n  if (finalCornersLongLat[0][0] === Infinity) {\r\n    return {};\r\n  }\r\n\r\n  const viewport = new WebMercatorViewport({ height, width }).fitBounds(\r\n    finalCornersLongLat,\r\n    {\r\n      padding,\r\n    }\r\n  );\r\n  const { longitude, latitude, zoom } = viewport;\r\n\r\n  return { longitude, latitude, zoom: Math.max(0, Math.min(zoom, capZoom)) };\r\n};\r\n"],"mappings":"AAAA,SAASA,mBAAT,QAAoC,SAApC;;AAEA,MAAMC,YAAY,GAAG,CAACC,IAAD,EAAOC,KAAP,KAAiBD,IAAI,CAACE,KAAL,CAAWC,IAAX,EAAiBF,KAAjB,CAAtC;;AAEA,OAAO,MAAMG,YAAY,GAAG,UAC1BC,MAD0B,EAGvB;EAAA,IADH;IAAEC,KAAK,GAAG,GAAV;IAAeC,MAAM,GAAG,GAAxB;IAA6BC,OAA7B;IAAsCC,OAAO,GAAG;EAAhD,CACG,uEADoD,EACpD;EACH,IAAI,CAACJ,MAAL,EAAa,OAAO,EAAP;EAEb,IAAIK,cAAc,GAAG,CAAC,EAAD,EAAK,EAAL,CAArB;EACA,MAAMC,YAAY,GAAG,MAArB;;EAEA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIT,IAAI,CAACU,IAAL,CAAUR,MAAM,CAACS,MAAP,GAAgBH,YAA1B,CAArB,EAA8DC,CAAC,EAA/D,EAAmE;IACjE,MAAMG,UAAU,GAAGV,MAAM,CACtBW,GADgB,CACXC,KAAD,IAAWA,KAAK,CAACC,SADL,EAEhBC,KAFgB,CAEVP,CAAC,KAAK,CAAN,GAAU,CAAV,GAAcA,CAAC,GAAG,IAAID,YAAR,GAAuB,CAF3B,EAE8BC,CAAC,GAAGD,YAFlC,CAAnB;IAGA,MAAMS,SAAS,GAAGf,MAAM,CACrBW,GADe,CACVC,KAAD,IAAWA,KAAK,CAACI,QADN,EAEfF,KAFe,CAETP,CAAC,KAAK,CAAN,GAAU,CAAV,GAAcA,CAAC,GAAG,IAAID,YAAR,GAAuB,CAF5B,EAE+BC,CAAC,GAAGD,YAFnC,CAAlB;;IAGA,IAAI;MACFD,cAAc,GAAG,CACf,GAAGA,cADY,EAEf,CAACX,YAAY,CAACI,IAAI,CAACmB,GAAN,EAAWP,UAAX,CAAb,EAAqChB,YAAY,CAACI,IAAI,CAACmB,GAAN,EAAWF,SAAX,CAAjD,CAFe,EAGf,CAACrB,YAAY,CAACI,IAAI,CAACoB,GAAN,EAAWR,UAAX,CAAb,EAAqChB,YAAY,CAACI,IAAI,CAACoB,GAAN,EAAWH,SAAX,CAAjD,CAHe,CAAjB;IAKD,CAND,CAME,MAAM;MACNI,OAAO,CAACC,GAAR,CAAY,0DAAZ;MACA,OAAO,EAAP;IACD;EACF;;EAED,IAAIC,WAAW,GAAG,CAAC,EAAD,EAAK,EAAL,CAAlB;EACA,IAAIC,UAAU,GAAG,CAAC,EAAD,EAAK,EAAL,CAAjB;;EACA,KAAK,IAAIf,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIF,cAAc,CAACI,MAAf,GAAwB,CAA7C,EAAgDF,CAAC,EAAjD,EAAqD;IACnDc,WAAW,GAAG,CAAC,GAAGA,WAAJ,EAAiB,CAAChB,cAAc,CAACE,CAAD,CAAd,CAAkB,CAAlB,CAAD,CAAjB,CAAd;IACAe,UAAU,GAAG,CAAC,GAAGA,UAAJ,EAAgB,CAACjB,cAAc,CAACE,CAAD,CAAd,CAAkB,CAAlB,CAAD,CAAhB,CAAb;EACD;;EAED,MAAMgB,mBAAmB,GAAG,CAC1B,CACE7B,YAAY,CAACI,IAAI,CAACmB,GAAN,EAAWI,WAAW,CAACP,KAAZ,CAAkB,CAAlB,EAAqBQ,UAAU,CAACb,MAAhC,CAAX,CADd,EAEEf,YAAY,CAACI,IAAI,CAACmB,GAAN,EAAWK,UAAU,CAACR,KAAX,CAAiB,CAAjB,EAAoBQ,UAAU,CAACb,MAA/B,CAAX,CAFd,CAD0B,EAK1B,CACEf,YAAY,CAACI,IAAI,CAACoB,GAAN,EAAWG,WAAW,CAACP,KAAZ,CAAkB,CAAlB,EAAqBQ,UAAU,CAACb,MAAhC,CAAX,CADd,EAEEf,YAAY,CAACI,IAAI,CAACoB,GAAN,EAAWI,UAAU,CAACR,KAAX,CAAiB,CAAjB,EAAoBQ,UAAU,CAACb,MAA/B,CAAX,CAFd,CAL0B,CAA5B;;EAWA,IAAIc,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,CAAvB,MAA8BC,QAAlC,EAA4C;IAC1C,OAAO,EAAP;EACD;;EAED,MAAMC,QAAQ,GAAG,IAAIhC,mBAAJ,CAAwB;IAAES,MAAF;IAAUD;EAAV,CAAxB,EAA2CyB,SAA3C,CACfH,mBADe,EAEf;IACEpB;EADF,CAFe,CAAjB;EAMA,MAAM;IAAEU,SAAF;IAAaG,QAAb;IAAuBW;EAAvB,IAAgCF,QAAtC;EAEA,OAAO;IAAEZ,SAAF;IAAaG,QAAb;IAAuBW,IAAI,EAAE7B,IAAI,CAACoB,GAAL,CAAS,CAAT,EAAYpB,IAAI,CAACmB,GAAL,CAASU,IAAT,EAAevB,OAAf,CAAZ;EAA7B,CAAP;AACD,CA3DM"},"metadata":{},"sourceType":"module"}